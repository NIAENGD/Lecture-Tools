<section class="content">
  <section class="panel content-panel">
    {% include "partials/top_bar.html" %}
    <div id="view-details" class="view active" data-view="details">
      <header class="view-header u-flex u-justify-between u-items-center">
        <h2 data-i18n="details.title">Lecture details</h2>
        <button
          id="delete-lecture"
          class="button button--danger"
          type="button"
          hidden
          data-i18n="details.deleteLecture"
        >
          Delete lecture
        </button>
      </header>
      <div id="edit-mode-banner" class="edit-banner" hidden data-i18n="details.editModeBanner">
        Edit mode is enabled. Update lecture information or remove items while it is active.
      </div>
      <div id="lecture-summary" class="placeholder" data-i18n="details.summaryPlaceholder">
        Select a lecture from the curriculum.
      </div>
      <form id="lecture-edit-form" hidden>
        <div class="field">
          <label for="edit-lecture-name" data-i18n="details.edit.titleLabel">Title</label>
          <input id="edit-lecture-name" name="name" type="text" required />
        </div>
        <div class="field">
          <label for="edit-lecture-module" data-i18n="details.edit.moduleLabel">Module</label>
          <select id="edit-lecture-module" name="module" required></select>
        </div>
        <div class="field">
          <label
            for="edit-lecture-description"
            data-i18n="details.edit.descriptionLabel"
          >
            Description
          </label>
          <textarea
            id="edit-lecture-description"
            name="description"
            rows="4"
          ></textarea>
        </div>
        <div class="form-actions">
          <button class="button button--primary" type="submit" data-i18n="details.edit.save">Save changes</button>
        </div>
      </form>
      <section id="asset-section" hidden>
        <h3 data-i18n="assets.title">Assets</h3>
        <ul id="asset-list" class="asset-list"></ul>
      </section>
    </div>
    <div id="view-progress" class="view" data-view="progress" hidden>
      <section class="panel progress-panel">
        <div class="progress-header">
          <h2 data-i18n="progress.title">Processing queue</h2>
          <button id="progress-refresh" type="button" class="button button--ghost" data-i18n="progress.refresh">
            Refresh
          </button>
        </div>
        <p id="progress-description" class="progress-description" data-i18n="progress.description">
          Track conversions, mastering, and transcriptions as they run.
        </p>
        <div id="progress-empty" class="progress-empty" data-i18n="progress.empty">
          No active tasks.
        </div>
        <ul id="progress-list" class="progress-list" aria-live="polite" aria-busy="false"></ul>
      </section>
    </div>
    <div id="view-create" class="view" data-view="create" hidden>
      <h2 data-i18n="create.title">Create lecture</h2>
      <form id="lecture-create-form">
        <div class="field">
          <label for="create-module" data-i18n="create.moduleLabel">Module</label>
          <select id="create-module" required></select>
        </div>
        <div class="field">
          <label for="create-name" data-i18n="create.titleLabel">Title</label>
          <input id="create-name" type="text" required />
        </div>
        <div class="field">
          <label for="create-description" data-i18n="create.descriptionLabel">Description</label>
          <textarea id="create-description" rows="4"></textarea>
        </div>
        <div class="form-actions">
          <button id="create-submit" class="button button--primary" type="submit" data-i18n="create.submit">
            Add lecture
          </button>
        </div>
      </form>
    </div>
    <div id="view-storage" class="view" data-view="storage" hidden>
      <div class="storage-page">
        <div class="storage-header">
          <h2 data-i18n="storage.title">Storage manager</h2>
          <div class="storage-actions">
            <button id="storage-refresh" class="button button--ghost" type="button" data-i18n="storage.actions.refresh">
              Refresh
            </button>
            <button
              id="storage-download-selected"
              type="button"
              class="button button--secondary"
              data-i18n="storage.actions.downloadSelected"
              disabled
            >
              Download selected
            </button>
            <button
              id="storage-purge"
              type="button"
              class="button button--danger"
              data-i18n="storage.actions.purge"
            >
              Remove processed audio
            </button>
          </div>
        </div>
        <section class="storage-browser" aria-live="polite">
          <div class="storage-browser-toolbar">
            <div class="storage-browser-nav">
              <button id="storage-nav-root" class="button button--ghost" type="button"
                data-i18n="storage.browser.root"
              >
                Root
              </button>
              <button id="storage-nav-up" class="button button--ghost" type="button"
                data-i18n="storage.browser.up"
              >
                Up
              </button>
            </div>
            <p id="storage-path" class="storage-path">/</p>
          </div>
          <div
            id="storage-browser-loading"
            class="storage-loading"
            hidden
            data-i18n="storage.browser.loading"
          >
            Loading…
          </div>
          <div
            id="storage-browser-empty"
            class="storage-empty"
            hidden
            data-i18n="storage.browser.empty"
          >
            No files or folders found.
          </div>
          <div
            id="storage-browser-table-wrapper"
            class="storage-browser-table-wrapper"
            hidden
          >
            <table class="storage-browser-table">
              <thead>
                <tr>
                  <th scope="col" class="storage-select-header">
                    <label
                      class="sr-only"
                      for="storage-select-all"
                      data-i18n="storage.browser.select"
                    >
                      Select
                    </label>
                    <input id="storage-select-all" type="checkbox" disabled />
                  </th>
                  <th scope="col" data-i18n="storage.browser.name">Name</th>
                  <th scope="col" data-i18n="storage.browser.type">Type</th>
                  <th scope="col" data-i18n="storage.browser.size">Size</th>
                  <th scope="col" data-i18n="storage.browser.modified">Modified</th>
                  <th scope="col" data-i18n="storage.browser.actions">Actions</th>
                </tr>
              </thead>
              <tbody id="storage-browser-body"></tbody>
            </table>
          </div>
        </section>
        <section class="storage-usage" aria-live="polite">
          <div class="storage-usage-item">
            <span class="storage-usage-label" data-i18n="storage.usage.used">Used</span>
            <span id="storage-used" class="storage-usage-value">--</span>
          </div>
          <div class="storage-usage-item">
            <span class="storage-usage-label" data-i18n="storage.usage.available">Available</span>
            <span id="storage-available" class="storage-usage-value">--</span>
          </div>
          <div class="storage-usage-item">
            <span class="storage-usage-label" data-i18n="storage.usage.total">Total</span>
            <span id="storage-total" class="storage-usage-value">--</span>
          </div>
        </section>
        <p
          id="storage-purge-summary"
          class="storage-purge-summary"
          data-i18n="storage.purge.none"
        ></p>
        <div id="storage-loading" class="storage-loading" hidden data-i18n="storage.loading">
          Loading…
        </div>
        <div id="storage-empty" class="storage-empty" hidden data-i18n="storage.empty">
          No stored classes found.
        </div>
        <div id="storage-class-wrapper" class="storage-class-wrapper" hidden>
          <ul id="storage-class-list" class="storage-class-list"></ul>
        </div>
      </div>
    </div>
    <div id="view-settings" class="view" data-view="settings" hidden>
      <h2 data-i18n="settings.title">Settings</h2>
      <form id="settings-form">
        <fieldset>
          <legend data-i18n="settings.appearance.legend">Appearance</legend>
          <div class="field-inline">
            <label for="settings-theme" data-i18n="settings.appearance.themeLabel">Theme</label>
            <select id="settings-theme">
              <option value="system" data-i18n="settings.appearance.theme.system">Follow system</option>
              <option value="light" data-i18n="settings.appearance.theme.light">Light</option>
              <option value="dark" data-i18n="settings.appearance.theme.dark">Dark</option>
            </select>
          </div>
          <div class="field-inline">
            <label for="settings-language" data-i18n="settings.language.label">Language</label>
            <select id="settings-language">
              <option value="en" data-i18n="settings.language.choices.en">English</option>
              <option value="zh" data-i18n="settings.language.choices.zh">中文 (Chinese)</option>
              <option value="es" data-i18n="settings.language.choices.es">Español (Spanish)</option>
              <option value="fr" data-i18n="settings.language.choices.fr">Français (French)</option>
            </select>
          </div>
        </fieldset>
        <fieldset>
          <legend data-i18n="settings.debug.legend">Debugging</legend>
          <label class="field-inline" for="settings-debug-enabled">
            <input id="settings-debug-enabled" type="checkbox" />
            <span data-i18n="settings.debug.enable">Enable debug mode</span>
          </label>
          <p class="field-help" data-i18n="settings.debug.description">
            Show a live console on the right that streams detailed program output.
          </p>
        </fieldset>
        <fieldset>
          <legend data-i18n="settings.whisper.legend">Whisper transcription</legend>
          <div class="field-inline">
            <label for="settings-whisper-model" data-i18n="settings.whisper.modelLabel">
              Default model
            </label>
            <select id="settings-whisper-model" required>
              <option value="tiny" data-i18n="settings.whisper.model.tiny">Tiny (fastest)</option>
              <option value="base" selected data-i18n="settings.whisper.model.base">
                Base (balanced)
              </option>
              <option value="small" data-i18n="settings.whisper.model.small">
                Small (accurate)
              </option>
              <option value="medium" data-i18n="settings.whisper.model.medium">
                Medium (detailed)
              </option>
              <option value="large" data-i18n="settings.whisper.model.large">
                Large (maximum accuracy)
              </option>
              <option value="gpu" class="gpu-only" disabled data-i18n="settings.whisper.model.gpu">
                GPU (hardware accelerated)
              </option>
            </select>
          </div>
          <div class="field-inline">
            <label for="settings-whisper-compute" data-i18n="settings.whisper.computeLabel">
              Compute type
            </label>
            <input id="settings-whisper-compute" type="text" required />
          </div>
          <div class="field-inline">
            <label for="settings-whisper-beam" data-i18n="settings.whisper.beamLabel">
              Beam size
            </label>
            <input id="settings-whisper-beam" type="number" min="1" max="10" required />
          </div>
          <div class="field-inline gpu-support">
            <div class="gpu-support-info">
              <label data-i18n="settings.whisper.gpu.label">GPU support</label>
              <p id="settings-whisper-gpu-status" data-i18n="settings.whisper.gpu.status">
                GPU acceleration not tested.
              </p>
            </div>
            <button id="settings-whisper-gpu-test" type="button" class="button button--secondary">
              <span data-i18n="settings.whisper.gpu.test">Test support</span>
            </button>
          </div>
        </fieldset>
        <fieldset>
          <legend data-i18n="settings.audio.legend">Audio</legend>
          <div class="field-inline">
            <label for="settings-audio-mastering" data-i18n="settings.audio.masteringLabel">
              Enable mastered audio
            </label>
            <input id="settings-audio-mastering" type="checkbox" />
          </div>
          <p class="field-help" data-i18n="settings.audio.masteringDescription">
            Automatically enhance uploaded audio for clarity.
          </p>
        </fieldset>
        <fieldset>
          <legend data-i18n="settings.slides.legend">Slides</legend>
          <div class="field-inline">
            <label for="settings-slide-dpi" data-i18n="settings.slides.dpiLabel">
              Rendering DPI
            </label>
            <select id="settings-slide-dpi" required>
              <option value="150" data-i18n="settings.slides.dpi.150">150 dpi (fastest)</option>
              <option value="200" selected data-i18n="settings.slides.dpi.200">
                200 dpi (balanced)
              </option>
              <option value="300" data-i18n="settings.slides.dpi.300">
                300 dpi (detailed)
              </option>
              <option value="400" data-i18n="settings.slides.dpi.400">
                400 dpi (high detail)
              </option>
              <option value="600" data-i18n="settings.slides.dpi.600">
                600 dpi (maximum)
              </option>
            </select>
          </div>
        </fieldset>
        <fieldset>
          <legend data-i18n="settings.update.legend">System updates</legend>
          <p class="field-help" data-i18n="settings.update.description">
            Update Lecture Tools without leaving the browser.
          </p>
          <div class="field-inline">
            <button id="settings-update-run" type="button" class="button button--secondary" data-i18n="settings.update.run">
              Run update
            </button>
            <button
              id="settings-update-refresh"
              type="button"
              class="button button--ghost"
              data-i18n="settings.update.refresh"
            >
              Refresh status
            </button>
          </div>
          <div class="update-status">
            <div
              id="settings-update-status"
              class="field-help"
              data-i18n="settings.update.status.idle"
            >
              No update in progress.
            </div>
            <div id="settings-update-meta" class="update-meta" hidden></div>
          </div>
          <div id="settings-update-log-wrapper" class="update-log-wrapper" hidden>
            <div class="update-log-label" data-i18n="settings.update.logLabel">Activity log</div>
            <pre
              id="settings-update-log"
              class="update-log"
              aria-live="polite"
              hidden
            ></pre>
            <div
              id="settings-update-log-empty"
              class="update-log-empty"
              data-i18n="settings.update.logEmpty"
            >
              No update activity yet.
            </div>
          </div>
        </fieldset>
        <fieldset>
          <legend data-i18n="settings.archive.legend">Archive</legend>
          <p class="field-help" data-i18n="settings.archive.description">
            Export your lectures and assets or import an archive from another machine.
          </p>
          <div class="field-inline archive-controls">
            <button id="settings-export" type="button" class="button button--secondary" data-i18n="settings.archive.export">
              Export archive
            </button>
            <button
              id="settings-import"
              type="button"
              class="button button--secondary"
              data-i18n="settings.archive.import"
            >
              Import archive
            </button>
            <label class="inline" for="settings-import-mode" data-i18n="settings.archive.modeLabel">
              Import mode
              <select id="settings-import-mode">
                <option value="merge" data-i18n="settings.archive.modes.merge">Merge with existing</option>
                <option value="replace" data-i18n="settings.archive.modes.replace">Replace existing data</option>
              </select>
            </label>
          </div>
          <p class="field-help" data-i18n="settings.archive.hint">
            Exported archives are stored temporarily and cleared when the app starts.
          </p>
        </fieldset>
        <div class="form-actions">
          <button class="button button--primary" type="submit" data-i18n="settings.save">Save settings</button>
        </div>
        <div class="form-actions">
          <button id="settings-exit-app" type="button" class="button button--danger" data-i18n="settings.exit">
            Exit application
          </button>
        </div>
      </form>
    </div>
  </section>
</section>
